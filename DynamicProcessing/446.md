LC.446 等差数列划分 II - 子序列
====
https://leetcode-cn.com/problems/arithmetic-slices-ii-subsequence/

## 思路 
动态规划 + 哈希表

子序列问题， 不要求连续， 就要想到用动态规划来解题。

动态规划的状态定义：

1. dp[i][diff] 代表以元素 nums[i] 结尾， 差为 diff 的个数。

2. 二维动态规划， 遍历 nums 中的元素对 (nums[i], nums[j])。

3. 动态转移方程： dp[i][diff] += dp[j][diff] + 1

4. 题目要求至少有三个元素， i, j 和 diff 正好就是三个元素。

参考力扣官方解答， 二维动态规划我还能做几道简单的， 难的真的就gg了。

## 代码
```python
class Solution:
    def numberOfArithmeticSlices(self, nums: [int]) -> int:
        '''
        dic = {index: {diff: count}}
        '''
        dic = [collections.defaultdict(int) for _ in nums]
        ans = 0
        for index, num in enumerate(nums):
            for j in range(index):
                diff = num - nums[j]
                count = dic[j][diff]
                ans += count
                dic[index][diff] += count +1
        return ans
```

## 复杂度分析
- 时间复杂度： O(n^2)
- 空间复杂度： O(n^2)
